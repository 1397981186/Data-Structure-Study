/**
ç»™å®šä¸€ä¸ªä»…åŒ…å« 0 å’Œ 1 ã€å¤§å°ä¸º rows x cols çš„äºŒç»´äºŒè¿›åˆ¶çŸ©é˜µï¼Œæ‰¾å‡ºåªåŒ…å« 1 çš„æœ€å¤§çŸ©å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚

 ç¤ºä¾‹ 1ï¼š
è¾“å…¥ï¼šmatrix = [["1","0","1","0","0"],["1","0","1","1","1"],["1","1","1","1","1"],[
"1","0","0","1","0"]]
è¾“å‡ºï¼š6
è§£é‡Šï¼šæœ€å¤§çŸ©å½¢å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚

 ç¤ºä¾‹ 2ï¼š
è¾“å…¥ï¼šmatrix = []
è¾“å‡ºï¼š0

 ç¤ºä¾‹ 3ï¼š
è¾“å…¥ï¼šmatrix = [["0"]]
è¾“å‡ºï¼š0

 ç¤ºä¾‹ 4ï¼š
è¾“å…¥ï¼šmatrix = [["1"]]
è¾“å‡ºï¼š1

 ç¤ºä¾‹ 5ï¼š
è¾“å…¥ï¼šmatrix = [["0","0"]]
è¾“å‡ºï¼š0

 æç¤ºï¼š
 rows == matrix.length 
 cols == matrix[0].length 
 1 <= row, cols <= 200 
 matrix[i][j] ä¸º '0' æˆ– '1' 
 
 Related Topics æ ˆ æ•°ç»„ åŠ¨æ€è§„åˆ’ çŸ©é˜µ å•è°ƒæ ˆ ğŸ‘ 1311 ğŸ‘ 0

*/

#include <iostream>
#include <vector>
#include <algorithm>
#include <unordered_set>
#include <map>
#include <stack>

using namespace std;
//æ³¨æ„è¡Œåˆ—çš„è·å–æ–¹å¼
//æ³¨æ„äºŒç»´vectorå£°æ˜å¹¶åˆå§‹åŒ–ä»ç„¶å¯ä»¥åƒäºŒç»´æ•°ç»„ï¼»ï¼½ï¼»ï¼½ä¸€æ ·

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    /**
			æ‰§è¡Œè€—æ—¶:36 ms,å‡»è´¥äº†84.66% çš„C++ç”¨æˆ·
			å†…å­˜æ¶ˆè€—:15 MB,å‡»è´¥äº†34.85% çš„C++ç”¨æˆ·
    */
public:
//    int getMaxSquare(vector<char> &height){
    int getMaxSquare(vector<int> height){
        int res=0;
        int temp=0;
        int midIt=0;


        height.insert(height.begin(),0);
        height.push_back(0);
        stack<int> st;
        st.push(0);

        for (int i = 1; i <= height.size() - 1; i++) {
            if (height[i]>height[st.top()]){
                st.push(i);
            }else if (height[i]==height[st.top()]){
                st.pop();
                st.push(i);
            } else{
                while (st.size()>1&&height[i]<height[st.top()]){
                    midIt=st.top();
                    st.pop();
                    temp=(height[midIt])*(i-st.top()-1);
                    if (temp>res){
                        res=temp;
                    }
                }
                st.push(i);
            }
        }

        return res;
    }

    int maximalRectangle(vector<vector<char>>& matrix) {
        int rows=matrix.size();//è¡Œ
        int cols=matrix[0].size();//åˆ—
        vector<int> heights(matrix[0].size(),0);
        int res=0;
        int tempRes=0;
        res=getMaxSquare(heights);
//        cout<<res<<endl;
        for (int i = 0; i <= rows - 1; i++) {
            for (int j = 0; j <= cols - 1; j++) {
                if (matrix[i][j]=='1'){
                    heights[j]+=1;
                } else{
                    heights[j]=0;
                }
//                cout<<heights[j]<<' ';
            }
//            cout<<endl;
            tempRes= getMaxSquare(heights);
            if (tempRes>res){
                res=tempRes;
            }
        }

        return res;
    }


};
//leetcode submit region end(Prohibit modification and deletion)

int main()
{
    Solution solution;

//æ³¨æ„äºŒç»´vectorä¾ç„¶å¯ä»¥å¦‚æ­¤å£°æ˜ï¼Œå°±åƒäºŒç»´æ•°ç»„ï¼»ï¼½ï¼»ï¼½ä¸€æ ·
    vector<vector<char>> nums1({{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}
                                ,{'1','1','1','1','1'}});
    double res;
    res=solution.maximalRectangle(nums1);
    cout<<"---sre---"<<res<<endl;
    return 0;
}

